<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>main</title>
    <link rel="stylesheet" href="./assets/css/main.css" />
    <link rel="stylesheet" href="./assets/css/reset.css" />
    <link rel="stylesheet" href="./assets/css/common.css" />
    <link rel="stylesheet" href="./assets/css/fonts.css" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css" />

    <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>
    <!-- gsap -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"
      integrity="sha512-NcZdtrT77bJr4STcmsGAESr06BYGE8woZdSdEgqnpyqac7sugNO+Tr4bGwGF3MsnEkGKhU2KL2xh6Ec+BqsaHA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    <script src="index.js" defer></script>
  </head>
  <body>
    <main>
      <div class="overlay_bg--block">
        <img src="./assets/img/deco/overlay_bg.jpg" alt="" />
      </div>
      <div class="wrapper">
        <div class="lang-wrap">
          <button class="lang-select">
            <span class="current-lang">한국어</span>
            <span class="arrow"></span>
          </button>

          <ul class="lang-dropdown">
            <li data-lang="ko">한국어</li>
            <li data-lang="en">영어 (미국)</li>
            <li data-lang="jp">일본어</li>
          </ul>
        </div>
        <section class="sec1">
          <div class="img--block">
            <img src="./assets/img/bg01.jpg" alt="sec1_bg" />
          </div>
          <div class="link-pin" aria-label="ball" style="top: 2%; height: 10%; left: 28.87%; width: 20%">
            <div class="img--block">
              <img src="./assets/img/deco/sec1_ball_01.png" alt="풍선" />
            </div>
          </div>
          <div class="link-pin" aria-label="ball" style="top: 2%; height: 10%; left: 51%; width: 20%">
            <div class="img--block">
              <img src="./assets/img/deco/sec1_ball_02.png" alt="풍선" />
            </div>
          </div>
          <div class="link-pin" aria-label="ball" style="top: 2%; height: 10%; left: 73.3%; width: 20%">
            <div class="img--block">
              <img src="./assets/img/deco/sec1_ball_03.png" alt="풍선" />
            </div>
          </div>

          <div class="link-pin" aria-label="ball01" style="top: 22%; height: 7%; left: 8%; width: 16%">
            <div class="img--block">
              <img src="./assets/img/deco/sec1_ball_04.png" alt="풍선" />
            </div>
          </div>
          <!-- sec1 menu -->
          <a class="link-pin" data-target="#about" aria-label="menu" style="top: 31%; height: 8%; left: 20%; width: 19%">
            <div class="img--block">
              <img src="./assets/img/deco/menu1.png" alt="About" />
            </div>
          </a>
          <a class="link-pin" data-target="#sec2" aria-label="menu" style="top: 31%; height: 8%; left: 40%; width: 19%">
            <div class="img--block">
              <img src="./assets/img/deco/menu2.png" alt="홍보 영상" />
            </div>
          </a>
          <a class="link-pin" data-target="#sec3" aria-label="menu" style="top: 31%; height: 8%; left: 60%; width: 19%">
            <div class="img--block">
              <img src="./assets/img/deco/menu3.png" alt="9 Zone" />
            </div>
          </a>
          <a class="link-pin" data-target="#sec4" aria-label="menu" style="top: 31%; height: 8%; left: 80%; width: 19%">
            <div class="img--block">
              <img src="./assets/img/deco/menu4.png" alt="Event" />
            </div>
          </a>
          <!-- about gif -->
          <div id="about" class="link-pin" aria-label="" style="top: 42%; height: 8%; left: 50%; width: 40%">
            <div class="img--block">
              <img src="./assets/img/deco/img-about.gif" alt="about.gif" />
            </div>
          </div>
        </section>
        <!-- 홍보 영상 -->
        <section id="sec2" class="sec2">
          <div class="img--block">
            <img src="./assets/img/bg2.jpg" alt="" />
          </div>
          <div class="link-pin" aria-label="" style="top: -5%; height: 60%; left: 50%; width: 100%">
            <div class="img--block">
              <img src="./assets/img/deco/sec2_deco_02.gif" alt="" />
            </div>
          </div>
          <div class="link-pin" aria-label="" style="top: -5%; height: 8%; left: 50%; width: 25%">
            <div class="img--block">
              <img src="./assets/img/deco/sec2_deco_01.png" alt="" />
            </div>
          </div>
          <div class="link-pin" aria-label="ball02" style="top: 44%; height: 8%; left: 87%; width: 19%">
            <div class="img--block">
              <img src="./assets/img/deco/sec2_ball_01.png" alt="" />
            </div>
          </div>
          <a class="link-pin" href="#link1" style="top: 7.9%; height: 16.5%; left: 50%; width: 51%"> </a>
          <a class="link-pin" href="#link1" style="top: 27.7%; height: 16.5%; left: 50%; width: 51%"> </a>
        </section>
        <!-- 9zone -->
        <section id="sec3" class="sec3">
          <div class="img--block">
            <img src="./assets/img/bg3.jpg" alt="" />
          </div>
          <div class="link-pin" aria-label="ball04" style="top: 11%; height: 14%; left: 7%; width: 18%; z-index: 5">
            <div class="img--block">
              <img src="./assets/img/deco/sec1_ball_04.png" alt="" />
            </div>
          </div>
          <div class="link-pin" aria-label="ball05" style="top: 40%; height: 13%; left: 92%; width: 16%; z-index: 5">
            <div class="img--block">
              <img src="./assets/img/deco/sec2_ball_01.png" alt="" />
            </div>
          </div>
          <div class="link-pin" style="top: 18%; height: 45%; left: 50%; width: 70%">
            <div class="swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <a href="#" data-zone="zone7.html" class="swiper--link open-zone">
                    <div class="img--block"><img src="./assets/img/place/img_place_01.jpg" alt="" /></div>
                    <h3 class="title">장충동</h3>
                    <p class="desc">우리가 몰랐던 리얼 <span>장충</span></p>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#" data-zone="zone5.html" class="swiper--link open-zone">
                    <div class="img--block"><img src="./assets/img/place/img_place_02.jpg" alt="" /></div>
                    <h3 class="title">필동</h3>
                    <p class="desc"><span>필</span>름처럼 새겨지는 감성<span>동</span>네</p>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#" data-zone="zone2.html" class="swiper--link open-zone">
                    <div class="img--block"><img src="./assets/img/place/img_place_03.jpg" alt="" /></div>
                    <h3 class="title">을지로</h3>
                    <p class="desc">옛것<span>을</span> <span>지</span>금으<span>로</span></p>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#" data-zone="zone8.html" class="swiper--link open-zone">
                    <div class="img--block"><img src="./assets/img/place/img_place_04.jpg" alt="" /></div>
                    <h3 class="title">회현동</h3>
                    <p class="desc">기<span>회</span>를 <span>현</span>재로 일구어낸 동네</p>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#" data-zone="zone1.html" class="swiper--link open-zone">
                    <div class="img--block"><img src="./assets/img/place/img_place_05.jpg" alt="" /></div>
                    <h3 class="title">신당동</h3>
                    <p class="desc"><span>신</span>묘하게 힙하<span>당</span> 힙당동</p>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#" data-zone="zone6.html" class="swiper--link open-zone">
                    <div class="img--block"><img src="./assets/img/place/img_place_06.jpg" alt="" /></div>
                    <h3 class="title">소공동</h3>
                    <p class="desc">서울<span>소</span>울 피어나는 성<span>공</span>로드</p>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#" data-zone="zone4.html" class="swiper--link open-zone">
                    <div class="img--block"><img src="./assets/img/place/img_place_07.jpg" alt="" /></div>
                    <h3 class="title">명동</h3>
                    <p class="desc"><span>명</span>성답게 빛나는 <span>동</span>네</p>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#" data-zone="zone3.html" class="swiper--link open-zone">
                    <div class="img--block"><img src="./assets/img/place/img_place_08.jpg" alt="" /></div>
                    <h3 class="title">중림동</h3>
                    <p class="desc">소<span>중</span>히 마음에 담는 그<span>림</span></p>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#" data-zone="zone9.html" class="swiper--link open-zone">
                    <div class="img--block"><img src="./assets/img/place/img_place_09.jpg" alt="" /></div>
                    <h3 class="title">광희동</h3>
                    <p class="desc">세계가 열<span>광</span>하는 환<span>희</span>의 빛</p>
                  </a>
                </div>
              </div>
              <div class="swiper-button-prev btn prev"></div>
              <div class="swiper-button-next btn next"></div>
            </div>
          </div>
        </section>
        <!-- playground jung-gu -->
        <section id="sec4" class="sec4">
          <div class="img--block">
            <img src="./assets/img/bg4.jpg" alt="" />
          </div>
          <div class="link-pin" aria-label="" style="top: 0%; height: 20%; left: 50%; width: 45.4%">
            <div class="img--block">
              <img src="./assets/img/deco/sec4_deco_01.gif" alt="" />
            </div>
          </div>
          <a class="link-pin" href="#link1" aria-label="" style="top: 22.3%; height: 18.4%; left: 27.3%; width: 26%">
            <div class="img--block"></div>
          </a>
          <a class="link-pin" href="#link1" aria-label="" style="top: 22.3%; height: 18.4%; left: 72.7%; width: 26%">
            <div class="img--block"></div>
          </a>
        </section>
        <section class="sec5">
          <div class="img--block">
            <img src="./assets/img/bg5.jpg" alt="" />
          </div>
          <div class="link-pin" aria-label="" style="top: 18.5%; height: 31%; left: 50%; width: 56%">
            <div class="swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <a href="#none">
                    <div class="img--block">
                      <img src="./assets/img/slide-1.png" alt="" />
                    </div>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#none">
                    <div class="img--block">
                      <img src="./assets/img/slide-1.png" alt="" />
                    </div>
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="#none">
                    <div class="img--block">
                      <img src="./assets/img/slide-1.png" alt="" />
                    </div>
                  </a>
                </div>
              </div>
            </div>
            <div class="swiper-button-prev btn prev"></div>
            <div class="swiper-button-next btn next"></div>
          </div>
          <div class="link-pin" aria-label="ball03" style="top: 40%; height: 8%; left: 94%; width: 19%">
            <div class="img--block">
              <img src="./assets/img/deco/sec2_ball_01.png" alt="" />
            </div>
          </div>
        </section>
        <section class="sec6">
          <div class="img--block">
            <img src="./assets/img/bg6.jpg" alt="" />
          </div>
        </section> 
      </div>
      <div id="layerWrap" class="layer-wrap">
        <div class="layer-content"></div>
      </div>
    </main>
    <script>
      document.querySelectorAll(".link-pin[data-target]").forEach((link) => {
        link.addEventListener("click", function (e) {
          e.preventDefault();

          const target = this.getAttribute("data-target");

          gsap.to(window, {
            duration: 0.2,
            scrollTo: {
              y: target,
              offsetY: 0,
            },
            ease: "power2.out",
          });
        });
      });
      let scrollY = 0;

      function openLayer() {
        scrollY = window.scrollY; // 현재 스크롤 위치 저장
        document.body.style.top = `-${scrollY}px`; // 고정 전 위치 유지
        document.body.classList.add("body-lock");
      }
      function closeLayer() {
        const layer = document.getElementById("layerWrap");
        layer.style.display = "none";

        // body 스크롤 다시 활성화
        document.body.classList.remove("body-lock");
      }
      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll(".open-zone").forEach((link) => {
          link.addEventListener("click", function (e) {
            e.preventDefault(); // 링크 이동 방지

            const zoneFile = this.dataset.zone;

            fetch(zoneFile)
              .then((res) => res.text())
              .then((html) => {
                document.querySelector(".layer-content").innerHTML = html;
                const layer = document.getElementById("layerWrap");
                layer.style.display = "flex";
                openLayer(); // ★ 여기
              });
          });
        });

        // 2) zone 내부의 닫기 버튼 처리 (이벤트 위임)
        document.getElementById("layerWrap").addEventListener("click", function (e) {
          if (e.target.id === "closeLayer") {
            closeLayer();
          }
        });

        document.getElementById("layerWrap").addEventListener("click", function (e) {
          const wrapper = document.querySelector(".layer-content .wrapper");

          // 닫기 버튼
          if (e.target.id === "closeLayer") {
            this.style.display = "none";
            closeLayer();
            return;
          }

          // wrapper 내부 클릭 → 닫지 않음
          if (wrapper && wrapper.contains(e.target)) {
            return;
          }

          // wrapper 바깥 클릭 → 닫기
          if (!wrapper.contains(e.target)) {
            this.style.display = "none";
            closeLayer();
          }
        });

        const langWrap = document.querySelector(".lang-wrap");
        const langSelect = document.querySelector(".lang-select");
        const currentLang = document.querySelector(".current-lang");
        const dropdown = document.querySelector(".lang-dropdown");
        // 1) 버튼 클릭 시 열기 / 닫기
        langSelect.addEventListener("click", (e) => {
          e.stopPropagation(); // 바깥 클릭 이벤트와 충돌 방지

          dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        });

        // 2) 언어 선택
        dropdown.querySelectorAll("li").forEach((item) => {
          item.addEventListener("click", (e) => {
            e.stopPropagation();
            currentLang.textContent = item.textContent;
            dropdown.style.display = "none";
          });
        });

        // 3) 바깥 클릭 시 닫기
        document.addEventListener("click", (e) => {
          if (!langWrap.contains(e.target)) {
            dropdown.style.display = "none";
          }
        });

        // 바깥 클릭 시 닫기
        document.addEventListener("click", (e) => {
          if (!e.target.closest(".lang-wrap")) {
            dropdown.style.display = "none";
          }
        });

        // swiper
        const swipersec3 = new Swiper(".sec3 .swiper", {
          loop: true,
          observer: true, // ← DOM 변화 감지
          observeParents: true, // ← 부모 요소 사이즈 변화 감지
          pagination: {
            el: ".swiper-pagination",
          },

          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },

          scrollbar: {
            el: ".swiper-scrollbar",
          },

          breakpoints: {
            // 1024px 이상 → 슬라이드 OFF, 정적 그리드
            1120: {
              slidesPerView: 3,
              grid: {
                rows: 3,
              },
              spaceBetween: 10,
              enabled: false, // 슬라이드 기능 꺼짐
            },
            // 576px ~ 1023px → 슬라이드 3개씩
            576: {
              slidesPerView: 3,
              spaceBetween: 5,
              enabled: true,
            },

            // 575px 이하 → 1개씩
            0: {
              slidesPerView: 1.5,
              spaceBetween: 5,
              enabled: true,
              centeredSlides: true,
            },
          },
        });

        const swipersec5 = new Swiper(".sec5 .swiper", {
          loop: true,

          pagination: {
            el: ".swiper-pagination",
          },

          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },

          scrollbar: {
            el: ".swiper-scrollbar",
          },
        });
      });
    </script>
  </body>
</html>
